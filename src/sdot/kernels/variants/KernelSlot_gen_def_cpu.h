void mk_items_n3_0_0_0_1_0_2_f3_0_c_2( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, const ShapeData &osd, const std::array<BI,3> &oni, const std::array<BI,3> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_2 = scp_0 / ( scp_0 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_2 = x_0_0 + d_0_2 * ( x_2_2 - x_0_0 );
        TF y_0_2 = y_0_0 + d_0_2 * ( y_2_2 - y_0_0 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_0_2;
        new_y_2_0[ ni_0 ] = y_0_2;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_0_0_1_0_3_f3_0_c_3( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_3 = scp_0 / ( scp_0 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_3 = x_0_0 + d_0_3 * ( x_3_3 - x_0_0 );
        TF y_0_3 = y_0_0 + d_0_3 * ( y_3_3 - y_0_0 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_0_3;
        new_y_2_0[ ni_0 ] = y_0_3;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_0_0_1_0_4_f3_0_c_4( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_0_4;
        new_y_2_0[ ni_0 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_0_0_1_0_5_f3_0_c_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_0_5;
        new_y_2_0[ ni_0 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_0_0_1_0_5_f3_0_c_5_n3_1_2_2_2_2_3_f3_1_2_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_0_5;
        new_y_2_0[ ni_0 ] = y_0_5;
        new_x_0_1[ ni_1 ] = x_1_2;
        new_y_0_1[ ni_1 ] = y_1_2;
        new_x_1_1[ ni_1 ] = x_2_2;
        new_y_1_1[ ni_1 ] = y_2_2;
        new_x_2_1[ ni_1 ] = x_2_3;
        new_y_2_1[ ni_1 ] = y_2_3;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_5[ index ];
        new_f_0_1[ ni_1 ] = old_f_1[ index ];
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_0_0_1_0_5_f3_0_c_5_n6_1_2_2_2_2_3_3_4_4_4_4_5_f6_1_2_c_3_4_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,6> &nni_1, const std::array<BI,6> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;
    TI *new_f_5_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 5 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_0_5;
        new_y_2_0[ ni_0 ] = y_0_5;
        new_x_0_1[ ni_1 ] = x_1_2;
        new_y_0_1[ ni_1 ] = y_1_2;
        new_x_1_1[ ni_1 ] = x_2_2;
        new_y_1_1[ ni_1 ] = y_2_2;
        new_x_2_1[ ni_1 ] = x_2_3;
        new_y_2_1[ ni_1 ] = y_2_3;
        new_x_3_1[ ni_1 ] = x_3_4;
        new_y_3_1[ ni_1 ] = y_3_4;
        new_x_4_1[ ni_1 ] = x_4_4;
        new_y_4_1[ ni_1 ] = y_4_4;
        new_x_5_1[ ni_1 ] = x_4_5;
        new_y_5_1[ ni_1 ] = y_4_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_5[ index ];
        new_f_0_1[ ni_1 ] = old_f_1[ index ];
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_3[ index ];
        new_f_4_1[ ni_1 ] = old_f_4[ index ];
        new_f_5_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_0_1_1_2_2_2_f4_0_c_1_2( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,3> &oni, const std::array<BI,3> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_0_1_1_2_2_2_f4_0_c_1_i_n5_0_0_2_2_2_3_3_4_4_4_f5_i_2_c_3_4( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_2_2;
        new_y_1_1[ ni_1 ] = y_2_2;
        new_x_2_1[ ni_1 ] = x_2_3;
        new_y_2_1[ ni_1 ] = y_2_3;
        new_x_3_1[ ni_1 ] = x_3_4;
        new_y_3_1[ ni_1 ] = y_3_4;
        new_x_4_1[ ni_1 ] = x_4_4;
        new_y_4_1[ ni_1 ] = y_4_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_3[ index ];
        new_f_4_1[ ni_1 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_0_1_1_2_2_2_f4_0_c_1_i_n5_0_0_2_2_2_3_4_5_5_5_f5_i_2_c_4_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_2_2;
        new_y_1_1[ ni_1 ] = y_2_2;
        new_x_2_1[ ni_1 ] = x_2_3;
        new_y_2_1[ ni_1 ] = y_2_3;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_0_1_1_2_2_2_f4_0_c_1_i_n5_0_0_2_2_3_3_3_4_0_4_f5_i_2_3_c_4( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_2_2;
        new_y_1_1[ ni_1 ] = y_2_2;
        new_x_2_1[ ni_1 ] = x_3_3;
        new_y_2_1[ ni_1 ] = y_3_3;
        new_x_3_1[ ni_1 ] = x_3_4;
        new_y_3_1[ ni_1 ] = y_3_4;
        new_x_4_1[ ni_1 ] = x_0_4;
        new_y_4_1[ ni_1 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_1[ ni_1 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_0_1_1_2_2_2_f4_0_c_1_i_n5_0_0_2_2_3_3_3_4_0_5_f5_i_2_3_c_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_2_2;
        new_y_1_1[ ni_1 ] = y_2_2;
        new_x_2_1[ ni_1 ] = x_3_3;
        new_y_2_1[ ni_1 ] = y_3_3;
        new_x_3_1[ ni_1 ] = x_3_4;
        new_y_3_1[ ni_1 ] = y_3_4;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_0_1_1_2_2_2_f4_0_c_1_i_n5_0_0_2_2_3_3_4_4_5_5_f5_i_2_3_4_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_2_2;
        new_y_1_1[ ni_1 ] = y_2_2;
        new_x_2_1[ ni_1 ] = x_3_3;
        new_y_2_1[ ni_1 ] = y_3_3;
        new_x_3_1[ ni_1 ] = x_4_4;
        new_y_3_1[ ni_1 ] = y_4_4;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_0_1_1_2_2_2_2_3_f5_0_c_1_2_i_n6_0_0_2_3_3_4_4_4_4_5_0_5_f6_i_c_3_4_c_5( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, ShapeData &nsd_1, const std::array<BI,6> &nni_1, const std::array<BI,6> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;
    TI *new_f_5_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 5 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_4_0[ ni_0 ] = x_2_3;
        new_y_4_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_2_3;
        new_y_1_1[ ni_1 ] = y_2_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_4;
        new_y_3_1[ ni_1 ] = y_4_4;
        new_x_4_1[ ni_1 ] = x_4_5;
        new_y_4_1[ ni_1 ] = y_4_5;
        new_x_5_1[ ni_1 ] = x_0_5;
        new_y_5_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_5_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_0_1_1_2_2_2_2_3_f5_0_c_1_2_i_n5_0_0_2_3_3_4_4_4_5_5_f5_i_c_3_4_5( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_4_0[ ni_0 ] = x_2_3;
        new_y_4_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_2_3;
        new_y_1_1[ ni_1 ] = y_2_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_4;
        new_y_3_1[ ni_1 ] = y_4_4;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_0_1_1_2_2_2_2_3_0_3_f6_0_c_1_2_c_3( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_3 = scp_0 / ( scp_0 - scp_3 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_3 = x_0_0 + d_0_3 * ( x_3_3 - x_0_0 );
        TF y_0_3 = y_0_0 + d_0_3 * ( y_3_3 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_4_0[ ni_0 ] = x_2_3;
        new_y_4_0[ ni_0 ] = y_2_3;
        new_x_5_0[ ni_0 ] = x_0_3;
        new_y_5_0[ ni_0 ] = y_0_3;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_5_0[ ni_0 ] = old_f_3[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_0_1_1_2_2_2_2_3_0_4_f6_0_c_1_2_c_4( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_4_0[ ni_0 ] = x_2_3;
        new_y_4_0[ ni_0 ] = y_2_3;
        new_x_5_0[ ni_0 ] = x_0_4;
        new_y_5_0[ ni_0 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_5_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_0_1_1_2_2_2_2_3_0_5_f6_0_c_1_2_c_5( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_4_0[ ni_0 ] = x_2_3;
        new_y_4_0[ ni_0 ] = y_2_3;
        new_x_5_0[ ni_0 ] = x_0_5;
        new_y_5_0[ ni_0 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_5_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_0_1_1_2_2_2_3_3_f5_0_c_1_2_3( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_4_0[ ni_0 ] = x_3_3;
        new_y_4_0[ ni_0 ] = y_3_3;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = old_f_3[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_0_1_1_2_2_2_3_3_f5_0_c_1_2_i_n5_0_0_3_3_3_4_4_5_5_5_f5_i_3_c_4_5( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_4_0[ ni_0 ] = x_3_3;
        new_y_4_0[ ni_0 ] = y_3_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_0_1_1_2_2_2_3_3_f5_0_c_1_2_i_n5_0_0_3_3_4_4_4_5_0_5_f5_i_3_4_c_5( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_4_0[ ni_0 ] = x_3_3;
        new_y_4_0[ ni_0 ] = y_3_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_4_4;
        new_y_2_1[ ni_1 ] = y_4_4;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_0_1_1_2_2_2_3_3_4_4_f6_0_c_1_2_3_4( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_2;
        new_y_3_0[ ni_0 ] = y_2_2;
        new_x_4_0[ ni_0 ] = x_3_3;
        new_y_4_0[ ni_0 ] = y_3_3;
        new_x_5_0[ ni_0 ] = x_4_4;
        new_y_5_0[ ni_0 ] = y_4_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_1[ index ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = old_f_3[ index ];
        new_f_5_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_0_1_2_3_3_3_f4_0_c_2_3( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_0_1_2_3_3_3_f4_0_c_2_i_n5_0_0_3_3_3_4_4_5_5_5_f5_i_3_c_4_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_0_1_2_3_3_3_f4_0_c_2_i_n5_0_0_3_3_4_4_4_5_0_5_f5_i_3_4_c_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_4_4;
        new_y_2_1[ ni_1 ] = y_4_4;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_0_1_2_3_3_3_3_4_0_4_f6_0_c_2_3_c_4( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_3_4;
        new_y_4_0[ ni_0 ] = y_3_4;
        new_x_5_0[ ni_0 ] = x_0_4;
        new_y_5_0[ ni_0 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_5_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_0_1_2_3_3_3_3_4_0_5_f6_0_c_2_3_c_5( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_3_4;
        new_y_4_0[ ni_0 ] = y_3_4;
        new_x_5_0[ ni_0 ] = x_0_5;
        new_y_5_0[ ni_0 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_5_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_0_1_2_3_3_3_4_4_f5_0_c_2_3_4( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_4_4;
        new_y_4_0[ ni_0 ] = y_4_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_0_1_2_3_3_3_4_4_5_5_f6_0_c_2_3_4_5( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_4_4;
        new_y_4_0[ ni_0 ] = y_4_4;
        new_x_5_0[ ni_0 ] = x_5_5;
        new_y_5_0[ ni_0 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];
        new_f_5_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_0_1_3_4_4_4_f4_0_c_3_4( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_3_4;
        new_y_2_0[ ni_0 ] = y_3_4;
        new_x_3_0[ ni_0 ] = x_4_4;
        new_y_3_0[ ni_0 ] = y_4_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_0_1_3_4_4_4_4_5_0_5_f6_0_c_3_4_c_5( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_3_4;
        new_y_2_0[ ni_0 ] = y_3_4;
        new_x_3_0[ ni_0 ] = x_4_4;
        new_y_3_0[ ni_0 ] = y_4_4;
        new_x_4_0[ ni_0 ] = x_4_5;
        new_y_4_0[ ni_0 ] = y_4_5;
        new_x_5_0[ ni_0 ] = x_0_5;
        new_y_5_0[ ni_0 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = old_f_4[ index ];
        new_f_4_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_5_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_0_1_3_4_4_4_5_5_f5_0_c_3_4_5( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_3_4;
        new_y_2_0[ ni_0 ] = y_3_4;
        new_x_3_0[ ni_0 ] = x_4_4;
        new_y_3_0[ ni_0 ] = y_4_4;
        new_x_4_0[ ni_0 ] = x_5_5;
        new_y_4_0[ ni_0 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = old_f_4[ index ];
        new_f_4_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_0_1_4_5_5_5_f4_0_c_4_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_0_1;
        new_y_1_0[ ni_0 ] = y_0_1;
        new_x_2_0[ ni_0 ] = x_4_5;
        new_y_2_0[ ni_0 ] = y_4_5;
        new_x_3_0[ ni_0 ] = x_5_5;
        new_y_3_0[ ni_0 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];
        new_f_3_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_1_1_1_2_0_2_f4_0_1_c_2( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,3> &oni, const std::array<BI,3> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];

        TF d_0_2 = scp_0 / ( scp_0 - scp_2 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];

        TF x_0_2 = x_0_0 + d_0_2 * ( x_2_2 - x_0_0 );
        TF y_0_2 = y_0_0 + d_0_2 * ( y_2_2 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_0_2;
        new_y_3_0[ ni_0 ] = y_0_2;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_1_1_1_2_0_3_f4_0_1_c_3( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_3 = scp_0 / ( scp_0 - scp_3 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_0_3 = x_0_0 + d_0_3 * ( x_3_3 - x_0_0 );
        TF y_0_3 = y_0_0 + d_0_3 * ( y_3_3 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_0_3;
        new_y_3_0[ ni_0 ] = y_0_3;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_1_1_1_2_0_4_f4_0_1_c_4( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_0_4;
        new_y_3_0[ ni_0 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_1_1_1_2_0_5_f4_0_1_c_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_0_5;
        new_y_3_0[ ni_0 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_1_1_1_2_2_3_f4_0_1_c_i_n5_0_0_2_3_3_3_3_4_0_4_f5_i_2_3_c_4( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_2_3;
        new_y_1_1[ ni_1 ] = y_2_3;
        new_x_2_1[ ni_1 ] = x_3_3;
        new_y_2_1[ ni_1 ] = y_3_3;
        new_x_3_1[ ni_1 ] = x_3_4;
        new_y_3_1[ ni_1 ] = y_3_4;
        new_x_4_1[ ni_1 ] = x_0_4;
        new_y_4_1[ ni_1 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_1[ ni_1 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_1_1_1_2_2_3_f4_0_1_c_i_n5_0_0_2_3_3_3_3_4_0_5_f5_i_2_3_c_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_2_3;
        new_y_1_1[ ni_1 ] = y_2_3;
        new_x_2_1[ ni_1 ] = x_3_3;
        new_y_2_1[ ni_1 ] = y_3_3;
        new_x_3_1[ ni_1 ] = x_3_4;
        new_y_3_1[ ni_1 ] = y_3_4;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_1_1_1_2_2_3_f4_0_1_c_i_n5_0_0_2_3_3_3_4_4_5_5_f5_i_2_3_4_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_2_3;
        new_y_1_1[ ni_1 ] = y_2_3;
        new_x_2_1[ ni_1 ] = x_3_3;
        new_y_2_1[ ni_1 ] = y_3_3;
        new_x_3_1[ ni_1 ] = x_4_4;
        new_y_3_1[ ni_1 ] = y_4_4;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_1_1_1_2_2_3_3_3_f5_0_1_c_2_3( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_3_3;
        new_y_4_0[ ni_0 ] = y_3_3;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = old_f_3[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_1_1_1_2_2_3_3_3_f5_0_1_c_2_i_n5_0_0_3_3_3_4_4_5_5_5_f5_i_3_c_4_5( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_3_3;
        new_y_4_0[ ni_0 ] = y_3_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_1_1_1_2_2_3_3_3_f5_0_1_c_2_i_n5_0_0_3_3_4_4_4_5_0_5_f5_i_3_4_c_5( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_3_3;
        new_y_4_0[ ni_0 ] = y_3_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_4_4;
        new_y_2_1[ ni_1 ] = y_4_4;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_1_1_1_2_2_3_3_3_4_4_f6_0_1_c_2_3_4( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_3_3;
        new_y_4_0[ ni_0 ] = y_3_3;
        new_x_5_0[ ni_0 ] = x_4_4;
        new_y_5_0[ ni_0 ] = y_4_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = old_f_3[ index ];
        new_f_5_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_1_1_1_2_3_4_f4_0_1_c_i_n5_0_0_3_4_4_4_4_5_0_5_f5_i_3_4_c_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_3_4;
        new_y_3_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_3_4;
        new_y_1_1[ ni_1 ] = y_3_4;
        new_x_2_1[ ni_1 ] = x_4_4;
        new_y_2_1[ ni_1 ] = y_4_4;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_1_1_1_2_3_4_4_4_f5_0_1_c_3_4( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_3_4;
        new_y_3_0[ ni_0 ] = y_3_4;
        new_x_4_0[ ni_0 ] = x_4_4;
        new_y_4_0[ ni_0 ] = y_4_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_1_1_1_2_3_4_4_4_5_5_f6_0_1_c_3_4_5( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_3_4;
        new_y_3_0[ ni_0 ] = y_3_4;
        new_x_4_0[ ni_0 ] = x_4_4;
        new_y_4_0[ ni_0 ] = y_4_4;
        new_x_5_0[ ni_0 ] = x_5_5;
        new_y_5_0[ ni_0 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];
        new_f_5_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_1_1_1_2_4_5_5_5_f5_0_1_c_4_5( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_4_5;
        new_y_3_0[ ni_0 ] = y_4_5;
        new_x_4_0[ ni_0 ] = x_5_5;
        new_y_4_0[ ni_0 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_4[ index ];
        new_f_4_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_0_1_1_2_2_f3_0_1_2( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, const ShapeData &osd, const std::array<BI,3> &oni, const std::array<BI,3> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];


        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_1_1_2_2_2_3_f4_0_1_2_i_n5_0_0_2_3_3_4_4_4_5_5_f5_i_c_3_4_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_2_3;
        new_y_1_1[ ni_1 ] = y_2_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_4;
        new_y_3_1[ ni_1 ] = y_4_4;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_1_1_2_2_2_3_0_3_f5_0_1_2_c_3( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_3 = scp_0 / ( scp_0 - scp_3 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_0_3 = x_0_0 + d_0_3 * ( x_3_3 - x_0_0 );
        TF y_0_3 = y_0_0 + d_0_3 * ( y_3_3 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_0_3;
        new_y_4_0[ ni_0 ] = y_0_3;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_0[ ni_0 ] = old_f_3[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_1_1_2_2_2_3_0_4_f5_0_1_2_c_4( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_0_4;
        new_y_4_0[ ni_0 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_1_1_2_2_2_3_0_5_f5_0_1_2_c_5( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_0_5;
        new_y_4_0[ ni_0 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_1_1_2_2_2_3_3_4_f5_0_1_2_c_i_n5_0_0_3_4_4_4_4_5_0_5_f5_i_3_4_c_5( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_3_4;
        new_y_4_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_3_4;
        new_y_1_1[ ni_1 ] = y_3_4;
        new_x_2_1[ ni_1 ] = x_4_4;
        new_y_2_1[ ni_1 ] = y_4_4;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_1_1_2_2_2_3_3_4_4_4_f6_0_1_2_c_3_4( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_3_4;
        new_y_4_0[ ni_0 ] = y_3_4;
        new_x_5_0[ ni_0 ] = x_4_4;
        new_y_5_0[ ni_0 ] = y_4_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_0[ ni_0 ] = old_f_3[ index ];
        new_f_5_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_1_1_2_2_2_3_4_5_5_5_f6_0_1_2_c_4_5( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_4_5;
        new_y_4_0[ ni_0 ] = y_4_5;
        new_x_5_0[ ni_0 ] = x_5_5;
        new_y_5_0[ ni_0 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];
        new_f_5_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_1_1_2_2_3_3_f4_0_1_2_3( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];


        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_1_1_2_2_3_3_f4_0_1_2_i_n5_0_0_3_3_3_4_4_5_5_5_f5_i_3_c_4_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_0_1_1_2_2_3_3_f4_0_1_2_i_n5_0_0_3_3_4_4_4_5_0_5_f5_i_3_4_c_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_4_4;
        new_y_2_1[ ni_1 ] = y_4_4;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_1_1_2_2_3_3_3_4_0_4_f6_0_1_2_3_c_4( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_3_4;
        new_y_4_0[ ni_0 ] = y_3_4;
        new_x_5_0[ ni_0 ] = x_0_4;
        new_y_5_0[ ni_0 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_5_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_1_1_2_2_3_3_3_4_0_5_f6_0_1_2_3_c_5( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_3_4;
        new_y_4_0[ ni_0 ] = y_3_4;
        new_x_5_0[ ni_0 ] = x_0_5;
        new_y_5_0[ ni_0 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_5_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_0_1_1_2_2_3_3_4_4_f5_0_1_2_3_4( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];


        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_4_4;
        new_y_4_0[ ni_0 ] = y_4_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_0_1_1_2_2_3_3_4_4_5_5_f6_0_1_2_3_4_5( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];


        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_0;
        new_y_0_0[ ni_0 ] = y_0_0;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_4_4;
        new_y_4_0[ ni_0 ] = y_4_4;
        new_x_5_0[ ni_0 ] = x_5_5;
        new_y_5_0[ ni_0 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];
        new_f_5_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_1_1_1_1_2_f3_0_1_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, const ShapeData &osd, const std::array<BI,3> &oni, const std::array<BI,2> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_1_1_1_1_2_f3_0_1_c_n6_0_5_2_3_3_3_3_4_4_5_5_5_f6_c_2_3_c_4_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,6> &nni_1, const std::array<BI,6> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;
    TI *new_f_5_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 5 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_0_1[ ni_1 ] = x_0_5;
        new_y_0_1[ ni_1 ] = y_0_5;
        new_x_1_1[ ni_1 ] = x_2_3;
        new_y_1_1[ ni_1 ] = y_2_3;
        new_x_2_1[ ni_1 ] = x_3_3;
        new_y_2_1[ ni_1 ] = y_3_3;
        new_x_3_1[ ni_1 ] = x_3_4;
        new_y_3_1[ ni_1 ] = y_3_4;
        new_x_4_1[ ni_1 ] = x_4_5;
        new_y_4_1[ ni_1 ] = y_4_5;
        new_x_5_1[ ni_1 ] = x_5_5;
        new_y_5_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_1[ ni_1 ] = old_f_4[ index ];
        new_f_5_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_1_1_1_1_2_f3_0_1_c_n3_2_3_3_3_3_4_f3_2_3_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_0_1[ ni_1 ] = x_2_3;
        new_y_0_1[ ni_1 ] = y_2_3;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_2[ index ];
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_1_1_1_1_2_2_3_f4_0_1_c_i_n5_0_1_2_3_3_3_4_4_0_4_f5_i_2_3_4_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_2_3;
        new_y_1_1[ ni_1 ] = y_2_3;
        new_x_2_1[ ni_1 ] = x_3_3;
        new_y_2_1[ ni_1 ] = y_3_3;
        new_x_3_1[ ni_1 ] = x_4_4;
        new_y_3_1[ ni_1 ] = y_4_4;
        new_x_4_1[ ni_1 ] = x_0_4;
        new_y_4_1[ ni_1 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_1_1_1_1_2_2_3_f4_0_1_c_i_n5_0_1_2_3_3_3_4_4_4_5_f5_i_2_3_4_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_2_3;
        new_y_1_1[ ni_1 ] = y_2_3;
        new_x_2_1[ ni_1 ] = x_3_3;
        new_y_2_1[ ni_1 ] = y_3_3;
        new_x_3_1[ ni_1 ] = x_4_4;
        new_y_3_1[ ni_1 ] = y_4_4;
        new_x_4_1[ ni_1 ] = x_4_5;
        new_y_4_1[ ni_1 ] = y_4_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_1_1_1_1_2_2_3_3_3_f5_0_1_c_2_i_n6_0_1_3_3_3_4_4_5_5_5_0_5_f6_i_3_c_4_5_c( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, ShapeData &nsd_1, const std::array<BI,6> &nni_1, const std::array<BI,6> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;
    TI *new_f_5_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 5 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_3_3;
        new_y_4_0[ ni_0 ] = y_3_3;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;
        new_x_5_1[ ni_1 ] = x_0_5;
        new_y_5_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];
        new_f_5_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_1_1_1_1_2_2_3_3_3_f5_0_1_c_2_i_n5_0_1_3_3_4_4_5_5_0_5_f5_i_3_4_5_c( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_3_3;
        new_y_4_0[ ni_0 ] = y_3_3;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_4_4;
        new_y_2_1[ ni_1 ] = y_4_4;
        new_x_3_1[ ni_1 ] = x_5_5;
        new_y_3_1[ ni_1 ] = y_5_5;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = old_f_5[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_1_1_1_1_2_2_3_3_3_0_3_f6_0_1_c_2_3_c( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_3 = scp_0 / ( scp_0 - scp_3 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_3 = x_0_0 + d_0_3 * ( x_3_3 - x_0_0 );
        TF y_0_3 = y_0_0 + d_0_3 * ( y_3_3 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_3_3;
        new_y_4_0[ ni_0 ] = y_3_3;
        new_x_5_0[ ni_0 ] = x_0_3;
        new_y_5_0[ ni_0 ] = y_0_3;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = old_f_3[ index ];
        new_f_5_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_1_1_1_1_2_2_3_3_3_3_4_f6_0_1_c_2_3_c( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_3_3;
        new_y_4_0[ ni_0 ] = y_3_3;
        new_x_5_0[ ni_0 ] = x_3_4;
        new_y_5_0[ ni_0 ] = y_3_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = old_f_3[ index ];
        new_f_5_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_1_1_1_1_2_2_3_3_3_3_4_f6_0_1_c_2_3_c_n3_0_5_4_5_5_5_f3_c_4_5( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_3_3;
        new_y_4_0[ ni_0 ] = y_3_3;
        new_x_5_0[ ni_0 ] = x_3_4;
        new_y_5_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_5;
        new_y_0_1[ ni_1 ] = y_0_5;
        new_x_1_1[ ni_1 ] = x_4_5;
        new_y_1_1[ ni_1 ] = y_4_5;
        new_x_2_1[ ni_1 ] = x_5_5;
        new_y_2_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_2[ index ];
        new_f_4_0[ ni_0 ] = old_f_3[ index ];
        new_f_5_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_1[ ni_1 ] = old_f_4[ index ];
        new_f_2_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_1_1_1_1_2_3_4_f4_0_1_c_i_n5_0_1_3_4_4_4_5_5_0_5_f5_i_3_4_5_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_3_4;
        new_y_3_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_3_4;
        new_y_1_1[ ni_1 ] = y_3_4;
        new_x_2_1[ ni_1 ] = x_4_4;
        new_y_2_1[ ni_1 ] = y_4_4;
        new_x_3_1[ ni_1 ] = x_5_5;
        new_y_3_1[ ni_1 ] = y_5_5;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = old_f_5[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_1_1_1_1_2_3_4_4_4_0_4_f6_0_1_c_3_4_c( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_3_4;
        new_y_3_0[ ni_0 ] = y_3_4;
        new_x_4_0[ ni_0 ] = x_4_4;
        new_y_4_0[ ni_0 ] = y_4_4;
        new_x_5_0[ ni_0 ] = x_0_4;
        new_y_5_0[ ni_0 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];
        new_f_5_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_1_1_1_1_2_3_4_4_4_4_5_f6_0_1_c_3_4_c( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_3_4;
        new_y_3_0[ ni_0 ] = y_3_4;
        new_x_4_0[ ni_0 ] = x_4_4;
        new_y_4_0[ ni_0 ] = y_4_4;
        new_x_5_0[ ni_0 ] = x_4_5;
        new_y_5_0[ ni_0 ] = y_4_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];
        new_f_5_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_1_1_1_1_2_4_5_5_5_0_5_f6_0_1_c_4_5_c( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_1_2;
        new_y_2_0[ ni_0 ] = y_1_2;
        new_x_3_0[ ni_0 ] = x_4_5;
        new_y_3_0[ ni_0 ] = y_4_5;
        new_x_4_0[ ni_0 ] = x_5_5;
        new_y_4_0[ ni_0 ] = y_5_5;
        new_x_5_0[ ni_0 ] = x_0_5;
        new_y_5_0[ ni_0 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_4[ index ];
        new_f_4_0[ ni_0 ] = old_f_5[ index ];
        new_f_5_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_1_1_1_2_2_0_2_f4_0_1_2_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,3> &oni, const std::array<BI,3> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_2 = scp_0 / ( scp_0 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_2 = x_0_0 + d_0_2 * ( x_2_2 - x_0_0 );
        TF y_0_2 = y_0_0 + d_0_2 * ( y_2_2 - y_0_0 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_0_2;
        new_y_3_0[ ni_0 ] = y_0_2;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_1_1_1_2_2_2_3_f4_0_1_2_i_n5_0_1_2_3_3_4_4_4_0_4_f5_i_c_3_4_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_2_3;
        new_y_1_1[ ni_1 ] = y_2_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_4;
        new_y_3_1[ ni_1 ] = y_4_4;
        new_x_4_1[ ni_1 ] = x_0_4;
        new_y_4_1[ ni_1 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_1_1_1_2_2_2_3_f4_0_1_2_i_n5_0_1_2_3_3_4_4_4_4_5_f5_i_c_3_4_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_2_3;
        new_y_1_1[ ni_1 ] = y_2_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_4;
        new_y_3_1[ ni_1 ] = y_4_4;
        new_x_4_1[ ni_1 ] = x_4_5;
        new_y_4_1[ ni_1 ] = y_4_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_1_1_1_2_2_2_3_f4_0_1_2_i_n5_0_1_2_3_4_5_5_5_0_5_f5_i_c_4_5_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_2_3;
        new_y_1_1[ ni_1 ] = y_2_3;
        new_x_2_1[ ni_1 ] = x_4_5;
        new_y_2_1[ ni_1 ] = y_4_5;
        new_x_3_1[ ni_1 ] = x_5_5;
        new_y_3_1[ ni_1 ] = y_5_5;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = old_f_5[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_1_1_1_2_2_2_3_f4_0_1_2_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,3> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_1_1_1_2_2_2_3_3_4_f5_0_1_2_c_i_n5_0_1_3_4_4_4_5_5_0_5_f5_i_3_4_5_c( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_3_4;
        new_y_4_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_3_4;
        new_y_1_1[ ni_1 ] = y_3_4;
        new_x_2_1[ ni_1 ] = x_4_4;
        new_y_2_1[ ni_1 ] = y_4_4;
        new_x_3_1[ ni_1 ] = x_5_5;
        new_y_3_1[ ni_1 ] = y_5_5;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = old_f_5[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_1_1_1_2_2_3_3_f4_0_1_2_i_n5_0_1_3_3_4_4_5_5_0_5_f5_i_3_4_5_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_4_4;
        new_y_2_1[ ni_1 ] = y_4_4;
        new_x_3_1[ ni_1 ] = x_5_5;
        new_y_3_1[ ni_1 ] = y_5_5;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = old_f_5[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_1_1_1_2_2_3_3_0_3_f5_0_1_2_3_c( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_3 = scp_0 / ( scp_0 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_3 = x_0_0 + d_0_3 * ( x_3_3 - x_0_0 );
        TF y_0_3 = y_0_0 + d_0_3 * ( y_3_3 - y_0_0 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_0_3;
        new_y_4_0[ ni_0 ] = y_0_3;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_1_1_1_2_2_3_3_3_4_f5_0_1_2_3_i_n5_0_1_3_4_4_5_5_5_0_5_f5_i_c_4_5_c( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_3_4;
        new_y_4_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_3_4;
        new_y_1_1[ ni_1 ] = y_3_4;
        new_x_2_1[ ni_1 ] = x_4_5;
        new_y_2_1[ ni_1 ] = y_4_5;
        new_x_3_1[ ni_1 ] = x_5_5;
        new_y_3_1[ ni_1 ] = y_5_5;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = old_f_5[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_1_1_1_2_2_3_3_3_4_f5_0_1_2_3_c( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_3_4;
        new_y_4_0[ ni_0 ] = y_3_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_1_1_1_2_2_3_3_4_4_0_4_f6_0_1_2_3_4_c( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_4_4;
        new_y_4_0[ ni_0 ] = y_4_4;
        new_x_5_0[ ni_0 ] = x_0_4;
        new_y_5_0[ ni_0 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];
        new_f_5_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_1_1_1_2_2_3_3_4_4_4_5_f6_0_1_2_3_4_c( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_1;
        new_y_0_0[ ni_0 ] = y_0_1;
        new_x_1_0[ ni_0 ] = x_1_1;
        new_y_1_0[ ni_0 ] = y_1_1;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_4_4;
        new_y_4_0[ ni_0 ] = y_4_4;
        new_x_5_0[ ni_0 ] = x_4_5;
        new_y_5_0[ ni_0 ] = y_4_5;

        new_f_0_0[ ni_0 ] = old_f_0[ index ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];
        new_f_5_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_2_1_2_2_2_f3_c_1_2( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, const ShapeData &osd, const std::array<BI,3> &oni, const std::array<BI,3> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];

        TF d_0_2 = scp_0 / ( scp_0 - scp_2 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];

        TF x_0_2 = x_0_0 + d_0_2 * ( x_2_2 - x_0_0 );
        TF y_0_2 = y_0_0 + d_0_2 * ( y_2_2 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_2;
        new_y_0_0[ ni_0 ] = y_0_2;
        new_x_1_0[ ni_0 ] = x_1_2;
        new_y_1_0[ ni_0 ] = y_1_2;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_3_1_2_2_2_3_3_f4_c_1_2_3( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_3 = scp_0 / ( scp_0 - scp_3 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_0_3 = x_0_0 + d_0_3 * ( x_3_3 - x_0_0 );
        TF y_0_3 = y_0_0 + d_0_3 * ( y_3_3 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_3;
        new_y_0_0[ ni_0 ] = y_0_3;
        new_x_1_0[ ni_0 ] = x_1_2;
        new_y_1_0[ ni_0 ] = y_1_2;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_3_2_3_3_3_f3_c_2_3( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_3 = scp_0 / ( scp_0 - scp_3 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_0_3 = x_0_0 + d_0_3 * ( x_3_3 - x_0_0 );
        TF y_0_3 = y_0_0 + d_0_3 * ( y_3_3 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_3;
        new_y_0_0[ ni_0 ] = y_0_3;
        new_x_1_0[ ni_0 ] = x_2_3;
        new_y_1_0[ ni_0 ] = y_2_3;
        new_x_2_0[ ni_0 ] = x_3_3;
        new_y_2_0[ ni_0 ] = y_3_3;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_3_2_3_3_3_f3_c_2_3_n3_0_1_1_1_1_2_f3_0_1_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_3 = scp_0 / ( scp_0 - scp_3 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_3 = x_0_0 + d_0_3 * ( x_3_3 - x_0_0 );
        TF y_0_3 = y_0_0 + d_0_3 * ( y_3_3 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_3;
        new_y_0_0[ ni_0 ] = y_0_3;
        new_x_1_0[ ni_0 ] = x_2_3;
        new_y_1_0[ ni_0 ] = y_2_3;
        new_x_2_0[ ni_0 ] = x_3_3;
        new_y_2_0[ ni_0 ] = y_3_3;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_4_1_2_2_2_2_3_3_4_4_4_f6_c_1_2_c_3_4( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_4;
        new_y_0_0[ ni_0 ] = y_0_4;
        new_x_1_0[ ni_0 ] = x_1_2;
        new_y_1_0[ ni_0 ] = y_1_2;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_3_4;
        new_y_4_0[ ni_0 ] = y_3_4;
        new_x_5_0[ ni_0 ] = x_4_4;
        new_y_5_0[ ni_0 ] = y_4_4;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_0[ ni_0 ] = old_f_3[ index ];
        new_f_5_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_4_1_2_2_2_3_3_4_4_f5_c_1_2_3_4( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_4;
        new_y_0_0[ ni_0 ] = y_0_4;
        new_x_1_0[ ni_0 ] = x_1_2;
        new_y_1_0[ ni_0 ] = y_1_2;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_4_4;
        new_y_4_0[ ni_0 ] = y_4_4;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_4_2_3_3_3_4_4_f4_c_2_3_4( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_4;
        new_y_0_0[ ni_0 ] = y_0_4;
        new_x_1_0[ ni_0 ] = x_2_3;
        new_y_1_0[ ni_0 ] = y_2_3;
        new_x_2_0[ ni_0 ] = x_3_3;
        new_y_2_0[ ni_0 ] = y_3_3;
        new_x_3_0[ ni_0 ] = x_4_4;
        new_y_3_0[ ni_0 ] = y_4_4;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_4_2_3_3_3_4_4_f4_c_2_3_4_n3_0_1_1_1_1_2_f3_0_1_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_4;
        new_y_0_0[ ni_0 ] = y_0_4;
        new_x_1_0[ ni_0 ] = x_2_3;
        new_y_1_0[ ni_0 ] = y_2_3;
        new_x_2_0[ ni_0 ] = x_3_3;
        new_y_2_0[ ni_0 ] = y_3_3;
        new_x_3_0[ ni_0 ] = x_4_4;
        new_y_3_0[ ni_0 ] = y_4_4;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = old_f_4[ index ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_4_3_4_4_4_f3_c_3_4( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_4;
        new_y_0_0[ ni_0 ] = y_0_4;
        new_x_1_0[ ni_0 ] = x_3_4;
        new_y_1_0[ ni_0 ] = y_3_4;
        new_x_2_0[ ni_0 ] = x_4_4;
        new_y_2_0[ ni_0 ] = y_4_4;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_4_3_4_4_4_f3_c_3_4_n3_0_1_1_1_1_2_f3_0_1_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_4;
        new_y_0_0[ ni_0 ] = y_0_4;
        new_x_1_0[ ni_0 ] = x_3_4;
        new_y_1_0[ ni_0 ] = y_3_4;
        new_x_2_0[ ni_0 ] = x_4_4;
        new_y_2_0[ ni_0 ] = y_4_4;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_4_3_4_4_4_f3_c_3_4_n4_0_1_1_1_2_2_2_3_f4_0_1_2_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,4> &nni_1, const std::array<BI,4> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_4;
        new_y_0_0[ ni_0 ] = y_0_4;
        new_x_1_0[ ni_0 ] = x_3_4;
        new_y_1_0[ ni_0 ] = y_3_4;
        new_x_2_0[ ni_0 ] = x_4_4;
        new_y_2_0[ ni_0 ] = y_4_4;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_2_2;
        new_y_2_1[ ni_1 ] = y_2_2;
        new_x_3_1[ ni_1 ] = x_2_3;
        new_y_3_1[ ni_1 ] = y_2_3;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = old_f_2[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_4_3_4_4_4_f3_c_3_4_n3_1_2_2_2_2_3_f3_1_2_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_4;
        new_y_0_0[ ni_0 ] = y_0_4;
        new_x_1_0[ ni_0 ] = x_3_4;
        new_y_1_0[ ni_0 ] = y_3_4;
        new_x_2_0[ ni_0 ] = x_4_4;
        new_y_2_0[ ni_0 ] = y_4_4;
        new_x_0_1[ ni_1 ] = x_1_2;
        new_y_0_1[ ni_1 ] = y_1_2;
        new_x_1_1[ ni_1 ] = x_2_2;
        new_y_1_1[ ni_1 ] = y_2_2;
        new_x_2_1[ ni_1 ] = x_2_3;
        new_y_2_1[ ni_1 ] = y_2_3;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];
        new_f_0_1[ ni_1 ] = old_f_1[ index ];
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_5_1_2_2_2_2_3_f4_c_1_2_i_n5_0_5_2_3_3_4_4_4_5_5_f5_i_c_3_4_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_1_2;
        new_y_1_0[ ni_0 ] = y_1_2;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_5;
        new_y_0_1[ ni_1 ] = y_0_5;
        new_x_1_1[ ni_1 ] = x_2_3;
        new_y_1_1[ ni_1 ] = y_2_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_4;
        new_y_3_1[ ni_1 ] = y_4_4;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_5_1_2_2_2_2_3_4_5_5_5_f6_c_1_2_c_4_5( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_1_2;
        new_y_1_0[ ni_0 ] = y_1_2;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_2_3;
        new_y_3_0[ ni_0 ] = y_2_3;
        new_x_4_0[ ni_0 ] = x_4_5;
        new_y_4_0[ ni_0 ] = y_4_5;
        new_x_5_0[ ni_0 ] = x_5_5;
        new_y_5_0[ ni_0 ] = y_5_5;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];
        new_f_5_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_5_1_2_2_2_3_3_f4_c_1_2_i_n5_0_5_3_3_3_4_4_5_5_5_f5_i_3_c_4_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_1_2;
        new_y_1_0[ ni_0 ] = y_1_2;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_0_1[ ni_1 ] = x_0_5;
        new_y_0_1[ ni_1 ] = y_0_5;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = TI( -1 );
        new_f_0_1[ ni_1 ] = TI( -1 );
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_5_1_2_2_2_3_3_4_4_5_5_f6_c_1_2_3_4_5( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_1_2;
        new_y_1_0[ ni_0 ] = y_1_2;
        new_x_2_0[ ni_0 ] = x_2_2;
        new_y_2_0[ ni_0 ] = y_2_2;
        new_x_3_0[ ni_0 ] = x_3_3;
        new_y_3_0[ ni_0 ] = y_3_3;
        new_x_4_0[ ni_0 ] = x_4_4;
        new_y_4_0[ ni_0 ] = y_4_4;
        new_x_5_0[ ni_0 ] = x_5_5;
        new_y_5_0[ ni_0 ] = y_5_5;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_1[ index ];
        new_f_2_0[ ni_0 ] = old_f_2[ index ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];
        new_f_5_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n6_0_5_2_3_3_3_3_4_4_5_5_5_f6_c_2_3_c_4_5( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_2_3;
        new_y_1_0[ ni_0 ] = y_2_3;
        new_x_2_0[ ni_0 ] = x_3_3;
        new_y_2_0[ ni_0 ] = y_3_3;
        new_x_3_0[ ni_0 ] = x_3_4;
        new_y_3_0[ ni_0 ] = y_3_4;
        new_x_4_0[ ni_0 ] = x_4_5;
        new_y_4_0[ ni_0 ] = y_4_5;
        new_x_5_0[ ni_0 ] = x_5_5;
        new_y_5_0[ ni_0 ] = y_5_5;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];
        new_f_5_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_5_2_3_3_3_4_4_5_5_f5_c_2_3_4_5( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_2_3;
        new_y_1_0[ ni_0 ] = y_2_3;
        new_x_2_0[ ni_0 ] = x_3_3;
        new_y_2_0[ ni_0 ] = y_3_3;
        new_x_3_0[ ni_0 ] = x_4_4;
        new_y_3_0[ ni_0 ] = y_4_4;
        new_x_4_0[ ni_0 ] = x_5_5;
        new_y_4_0[ ni_0 ] = y_5_5;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = old_f_4[ index ];
        new_f_4_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_0_5_2_3_3_3_4_4_5_5_f5_c_2_3_4_5_n3_0_1_1_1_1_2_f3_0_1_c( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_2_3;
        new_y_1_0[ ni_0 ] = y_2_3;
        new_x_2_0[ ni_0 ] = x_3_3;
        new_y_2_0[ ni_0 ] = y_3_3;
        new_x_3_0[ ni_0 ] = x_4_4;
        new_y_3_0[ ni_0 ] = y_4_4;
        new_x_4_0[ ni_0 ] = x_5_5;
        new_y_4_0[ ni_0 ] = y_5_5;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = old_f_4[ index ];
        new_f_4_0[ ni_0 ] = old_f_5[ index ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_5_3_4_4_4_5_5_f4_c_3_4_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_3_4;
        new_y_1_0[ ni_0 ] = y_3_4;
        new_x_2_0[ ni_0 ] = x_4_4;
        new_y_2_0[ ni_0 ] = y_4_4;
        new_x_3_0[ ni_0 ] = x_5_5;
        new_y_3_0[ ni_0 ] = y_5_5;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];
        new_f_3_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_5_3_4_4_4_5_5_f4_c_3_4_5_n3_0_1_1_1_1_2_f3_0_1_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_3_4;
        new_y_1_0[ ni_0 ] = y_3_4;
        new_x_2_0[ ni_0 ] = x_4_4;
        new_y_2_0[ ni_0 ] = y_4_4;
        new_x_3_0[ ni_0 ] = x_5_5;
        new_y_3_0[ ni_0 ] = y_5_5;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];
        new_f_3_0[ ni_0 ] = old_f_5[ index ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_5_3_4_4_4_5_5_f4_c_3_4_5_n4_0_1_1_1_2_2_2_3_f4_0_1_2_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,4> &nni_1, const std::array<BI,4> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_3_4;
        new_y_1_0[ ni_0 ] = y_3_4;
        new_x_2_0[ ni_0 ] = x_4_4;
        new_y_2_0[ ni_0 ] = y_4_4;
        new_x_3_0[ ni_0 ] = x_5_5;
        new_y_3_0[ ni_0 ] = y_5_5;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_2_2;
        new_y_2_1[ ni_1 ] = y_2_2;
        new_x_3_1[ ni_1 ] = x_2_3;
        new_y_3_1[ ni_1 ] = y_2_3;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];
        new_f_3_0[ ni_0 ] = old_f_5[ index ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = old_f_2[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_0_5_3_4_4_4_5_5_f4_c_3_4_5_n3_1_2_2_2_2_3_f3_1_2_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_3_4;
        new_y_1_0[ ni_0 ] = y_3_4;
        new_x_2_0[ ni_0 ] = x_4_4;
        new_y_2_0[ ni_0 ] = y_4_4;
        new_x_3_0[ ni_0 ] = x_5_5;
        new_y_3_0[ ni_0 ] = y_5_5;
        new_x_0_1[ ni_1 ] = x_1_2;
        new_y_0_1[ ni_1 ] = y_1_2;
        new_x_1_1[ ni_1 ] = x_2_2;
        new_y_1_1[ ni_1 ] = y_2_2;
        new_x_2_1[ ni_1 ] = x_2_3;
        new_y_2_1[ ni_1 ] = y_2_3;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];
        new_f_3_0[ ni_0 ] = old_f_5[ index ];
        new_f_0_1[ ni_1 ] = old_f_1[ index ];
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_5_4_5_5_5_f3_c_4_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_4_5;
        new_y_1_0[ ni_0 ] = y_4_5;
        new_x_2_0[ ni_0 ] = x_5_5;
        new_y_2_0[ ni_0 ] = y_5_5;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_5_4_5_5_5_f3_c_4_5_n3_0_1_1_1_1_2_f3_0_1_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_4_5;
        new_y_1_0[ ni_0 ] = y_4_5;
        new_x_2_0[ ni_0 ] = x_5_5;
        new_y_2_0[ ni_0 ] = y_5_5;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = old_f_5[ index ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_5_4_5_5_5_f3_c_4_5_n4_0_1_1_1_2_2_2_3_f4_0_1_2_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,4> &nni_1, const std::array<BI,4> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_4_5;
        new_y_1_0[ ni_0 ] = y_4_5;
        new_x_2_0[ ni_0 ] = x_5_5;
        new_y_2_0[ ni_0 ] = y_5_5;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_2_2;
        new_y_2_1[ ni_1 ] = y_2_2;
        new_x_3_1[ ni_1 ] = x_2_3;
        new_y_3_1[ ni_1 ] = y_2_3;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = old_f_5[ index ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = old_f_2[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_5_4_5_5_5_f3_c_4_5_n5_0_1_1_1_2_2_3_3_3_4_f5_0_1_2_3_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_4_5;
        new_y_1_0[ ni_0 ] = y_4_5;
        new_x_2_0[ ni_0 ] = x_5_5;
        new_y_2_0[ ni_0 ] = y_5_5;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_2_2;
        new_y_2_1[ ni_1 ] = y_2_2;
        new_x_3_1[ ni_1 ] = x_3_3;
        new_y_3_1[ ni_1 ] = y_3_3;
        new_x_4_1[ ni_1 ] = x_3_4;
        new_y_4_1[ ni_1 ] = y_3_4;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = old_f_5[ index ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = old_f_2[ index ];
        new_f_3_1[ ni_1 ] = old_f_3[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_5_4_5_5_5_f3_c_4_5_n3_1_2_2_2_2_3_f3_1_2_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_4_5;
        new_y_1_0[ ni_0 ] = y_4_5;
        new_x_2_0[ ni_0 ] = x_5_5;
        new_y_2_0[ ni_0 ] = y_5_5;
        new_x_0_1[ ni_1 ] = x_1_2;
        new_y_0_1[ ni_1 ] = y_1_2;
        new_x_1_1[ ni_1 ] = x_2_2;
        new_y_1_1[ ni_1 ] = y_2_2;
        new_x_2_1[ ni_1 ] = x_2_3;
        new_y_2_1[ ni_1 ] = y_2_3;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = old_f_5[ index ];
        new_f_0_1[ ni_1 ] = old_f_1[ index ];
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_5_4_5_5_5_f3_c_4_5_n4_1_2_2_2_3_3_3_4_f4_1_2_3_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,4> &nni_1, const std::array<BI,4> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_4_5;
        new_y_1_0[ ni_0 ] = y_4_5;
        new_x_2_0[ ni_0 ] = x_5_5;
        new_y_2_0[ ni_0 ] = y_5_5;
        new_x_0_1[ ni_1 ] = x_1_2;
        new_y_0_1[ ni_1 ] = y_1_2;
        new_x_1_1[ ni_1 ] = x_2_2;
        new_y_1_1[ ni_1 ] = y_2_2;
        new_x_2_1[ ni_1 ] = x_3_3;
        new_y_2_1[ ni_1 ] = y_3_3;
        new_x_3_1[ ni_1 ] = x_3_4;
        new_y_3_1[ ni_1 ] = y_3_4;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = old_f_5[ index ];
        new_f_0_1[ ni_1 ] = old_f_1[ index ];
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_5_4_5_5_5_f3_c_4_5_n3_2_3_3_3_3_4_f3_2_3_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_4_5;
        new_y_1_0[ ni_0 ] = y_4_5;
        new_x_2_0[ ni_0 ] = x_5_5;
        new_y_2_0[ ni_0 ] = y_5_5;
        new_x_0_1[ ni_1 ] = x_2_3;
        new_y_0_1[ ni_1 ] = y_2_3;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = old_f_5[ index ];
        new_f_0_1[ ni_1 ] = old_f_2[ index ];
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_0_5_4_5_5_5_f3_c_4_5_n3_2_3_3_3_3_4_f3_2_3_c_n3_0_1_1_1_1_2_f3_0_1_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, ShapeData &nsd_2, const std::array<BI,3> &nni_2, const std::array<BI,3> &nfi_2, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_0_2 = reinterpret_cast<TF *>( nsd_2.coordinates ) + ( nni_2[ 0 ] * dim + 0 ) * nsd_2.rese;
    TF *new_y_0_2 = reinterpret_cast<TF *>( nsd_2.coordinates ) + ( nni_2[ 0 ] * dim + 1 ) * nsd_2.rese;
    TF *new_x_1_2 = reinterpret_cast<TF *>( nsd_2.coordinates ) + ( nni_2[ 1 ] * dim + 0 ) * nsd_2.rese;
    TF *new_y_1_2 = reinterpret_cast<TF *>( nsd_2.coordinates ) + ( nni_2[ 1 ] * dim + 1 ) * nsd_2.rese;
    TF *new_x_2_2 = reinterpret_cast<TF *>( nsd_2.coordinates ) + ( nni_2[ 2 ] * dim + 0 ) * nsd_2.rese;
    TF *new_y_2_2 = reinterpret_cast<TF *>( nsd_2.coordinates ) + ( nni_2[ 2 ] * dim + 1 ) * nsd_2.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_0_2 = reinterpret_cast<TI *>( nsd_2.face_ids ) + nni_2[ 0 ] * nsd_2.rese;
    TI *new_f_1_2 = reinterpret_cast<TI *>( nsd_2.face_ids ) + nni_2[ 1 ] * nsd_2.rese;
    TI *new_f_2_2 = reinterpret_cast<TI *>( nsd_2.face_ids ) + nni_2[ 2 ] * nsd_2.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );
    TI *new_ids_2 = reinterpret_cast<TI *>( nsd_2.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;
        TI ni_2 = nsd_2.size++;

        new_x_0_0[ ni_0 ] = x_0_5;
        new_y_0_0[ ni_0 ] = y_0_5;
        new_x_1_0[ ni_0 ] = x_4_5;
        new_y_1_0[ ni_0 ] = y_4_5;
        new_x_2_0[ ni_0 ] = x_5_5;
        new_y_2_0[ ni_0 ] = y_5_5;
        new_x_0_1[ ni_1 ] = x_2_3;
        new_y_0_1[ ni_1 ] = y_2_3;
        new_x_1_1[ ni_1 ] = x_3_3;
        new_y_1_1[ ni_1 ] = y_3_3;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_0_2[ ni_2 ] = x_0_1;
        new_y_0_2[ ni_2 ] = y_0_1;
        new_x_1_2[ ni_2 ] = x_1_1;
        new_y_1_2[ ni_2 ] = y_1_1;
        new_x_2_2[ ni_2 ] = x_1_2;
        new_y_2_2[ ni_2 ] = y_1_2;

        new_f_0_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = old_f_5[ index ];
        new_f_0_1[ ni_1 ] = old_f_2[ index ];
        new_f_1_1[ ni_1 ] = old_f_3[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_2[ ni_2 ] = old_f_0[ index ];
        new_f_1_2[ ni_2 ] = old_f_1[ index ];
        new_f_2_2[ ni_2 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
        new_ids_2[ ni_2 ] = old_ids[ index ];
    }
}
void mk_items_n3_1_2_2_2_2_3_f3_1_2_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,3> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_1_2_2_2_2_3_f3_1_2_c_n3_0_0_0_1_0_3_f3_0_c_3( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,4> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_3 = scp_0 / ( scp_0 - scp_3 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_3 = x_0_0 + d_0_3 * ( x_3_3 - x_0_0 );
        TF y_0_3 = y_0_0 + d_0_3 * ( y_3_3 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_0_3;
        new_y_2_1[ ni_1 ] = y_0_3;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_1_2_2_2_2_3_f3_1_2_c_n3_0_0_0_1_0_4_f3_0_c_4( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_0_4;
        new_y_2_1[ ni_1 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_1_2_2_2_2_3_f3_1_2_c_n3_0_0_0_1_0_5_f3_0_c_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_0_5;
        new_y_2_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_1_2_2_2_2_3_f3_1_2_c_n4_0_0_0_1_3_4_4_4_f4_0_c_3_4( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,4> &nni_1, const std::array<BI,4> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_4;
        new_y_3_1[ ni_1 ] = y_4_4;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_1_2_2_2_2_3_f3_1_2_c_n6_0_0_0_1_3_4_4_4_4_5_0_5_f6_0_c_3_4_c_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,6> &nni_1, const std::array<BI,6> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;
    TI *new_f_5_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 5 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_4;
        new_y_3_1[ ni_1 ] = y_4_4;
        new_x_4_1[ ni_1 ] = x_4_5;
        new_y_4_1[ ni_1 ] = y_4_5;
        new_x_5_1[ ni_1 ] = x_0_5;
        new_y_5_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_5_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_1_2_2_2_2_3_f3_1_2_c_n5_0_0_0_1_3_4_4_4_5_5_f5_0_c_3_4_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_3_4;
        new_y_2_1[ ni_1 ] = y_3_4;
        new_x_3_1[ ni_1 ] = x_4_4;
        new_y_3_1[ ni_1 ] = y_4_4;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_3[ index ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_1_2_2_2_2_3_f3_1_2_c_n4_0_0_0_1_4_5_5_5_f4_0_c_4_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,4> &nni_1, const std::array<BI,4> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_4_5;
        new_y_2_1[ ni_1 ] = y_4_5;
        new_x_3_1[ ni_1 ] = x_5_5;
        new_y_3_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_1_2_2_2_2_3_f3_1_2_c_n3_3_4_4_4_4_5_f3_3_4_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_0_1[ ni_1 ] = x_3_4;
        new_y_0_1[ ni_1 ] = y_3_4;
        new_x_1_1[ ni_1 ] = x_4_4;
        new_y_1_1[ ni_1 ] = y_4_4;
        new_x_2_1[ ni_1 ] = x_4_5;
        new_y_2_1[ ni_1 ] = y_4_5;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_3[ index ];
        new_f_1_1[ ni_1 ] = old_f_4[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n6_1_2_2_2_2_3_3_4_4_4_4_5_f6_1_2_c_3_4_c( ShapeData &nsd_0, const std::array<BI,6> &nni_0, const std::array<BI,6> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_5_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 5 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_5_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 5 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_2_3;
        new_y_2_0[ ni_0 ] = y_2_3;
        new_x_3_0[ ni_0 ] = x_3_4;
        new_y_3_0[ ni_0 ] = y_3_4;
        new_x_4_0[ ni_0 ] = x_4_4;
        new_y_4_0[ ni_0 ] = y_4_4;
        new_x_5_0[ ni_0 ] = x_4_5;
        new_y_5_0[ ni_0 ] = y_4_5;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_0[ ni_0 ] = old_f_3[ index ];
        new_f_4_0[ ni_0 ] = old_f_4[ index ];
        new_f_5_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_1_2_2_2_3_3_3_4_f4_1_2_3_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_3_3;
        new_y_2_0[ ni_0 ] = y_3_3;
        new_x_3_0[ ni_0 ] = x_3_4;
        new_y_3_0[ ni_0 ] = y_3_4;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_1_2_2_2_3_3_3_4_f4_1_2_3_c_n3_0_0_0_1_0_4_f3_0_c_4( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_3_3;
        new_y_2_0[ ni_0 ] = y_3_3;
        new_x_3_0[ ni_0 ] = x_3_4;
        new_y_3_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_0_4;
        new_y_2_1[ ni_1 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_1_2_2_2_3_3_3_4_f4_1_2_3_c_n3_0_0_0_1_0_5_f3_0_c_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_3_3;
        new_y_2_0[ ni_0 ] = y_3_3;
        new_x_3_0[ ni_0 ] = x_3_4;
        new_y_3_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_0_5;
        new_y_2_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_1_2_2_2_3_3_3_4_f4_1_2_3_c_n4_0_0_0_1_4_5_5_5_f4_0_c_4_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,4> &nni_1, const std::array<BI,4> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_3_3;
        new_y_2_0[ ni_0 ] = y_3_3;
        new_x_3_0[ ni_0 ] = x_3_4;
        new_y_3_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_4_5;
        new_y_2_1[ ni_1 ] = y_4_5;
        new_x_3_1[ ni_1 ] = x_5_5;
        new_y_3_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n5_1_2_2_2_3_3_4_4_4_5_f5_1_2_3_4_c( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_3_3;
        new_y_2_0[ ni_0 ] = y_3_3;
        new_x_3_0[ ni_0 ] = x_4_4;
        new_y_3_0[ ni_0 ] = y_4_4;
        new_x_4_0[ ni_0 ] = x_4_5;
        new_y_4_0[ ni_0 ] = y_4_5;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = old_f_4[ index ];
        new_f_4_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n5_1_2_2_2_3_3_4_4_4_5_f5_1_2_3_4_c_n3_0_0_0_1_0_5_f3_0_c_5( ShapeData &nsd_0, const std::array<BI,5> &nni_0, const std::array<BI,5> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_4_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 4 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_4_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 4 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_1_2;
        new_y_0_0[ ni_0 ] = y_1_2;
        new_x_1_0[ ni_0 ] = x_2_2;
        new_y_1_0[ ni_0 ] = y_2_2;
        new_x_2_0[ ni_0 ] = x_3_3;
        new_y_2_0[ ni_0 ] = y_3_3;
        new_x_3_0[ ni_0 ] = x_4_4;
        new_y_3_0[ ni_0 ] = y_4_4;
        new_x_4_0[ ni_0 ] = x_4_5;
        new_y_4_0[ ni_0 ] = y_4_5;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_0_5;
        new_y_2_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_1[ index ];
        new_f_1_0[ ni_0 ] = old_f_2[ index ];
        new_f_2_0[ ni_0 ] = old_f_3[ index ];
        new_f_3_0[ ni_0 ] = old_f_4[ index ];
        new_f_4_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_2_3_3_3_3_4_f3_2_3_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_3_4;
        new_y_2_0[ ni_0 ] = y_3_4;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_2_3_3_3_3_4_f3_2_3_c_n3_0_0_0_1_0_4_f3_0_c_4( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_3_4;
        new_y_2_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_0_4;
        new_y_2_1[ ni_1 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_2_3_3_3_3_4_f3_2_3_c_n3_0_0_0_1_0_5_f3_0_c_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_3_4;
        new_y_2_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_0_5;
        new_y_2_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_2_3_3_3_3_4_f3_2_3_c_n4_0_0_0_1_4_5_5_5_f4_0_c_4_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,4> &nni_1, const std::array<BI,4> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_3_4;
        new_y_2_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_4_5;
        new_y_2_1[ ni_1 ] = y_4_5;
        new_x_3_1[ ni_1 ] = x_5_5;
        new_y_3_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_4[ index ];
        new_f_3_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_2_3_3_3_3_4_f3_2_3_c_n4_0_0_1_1_1_2_0_4_f4_0_1_c_4( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,4> &nni_1, const std::array<BI,4> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_4 = scp_0 / ( scp_0 - scp_4 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_4 = x_0_0 + d_0_4 * ( x_4_4 - x_0_0 );
        TF y_0_4 = y_0_0 + d_0_4 * ( y_4_4 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_3_4;
        new_y_2_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;
        new_x_3_1[ ni_1 ] = x_0_4;
        new_y_3_1[ ni_1 ] = y_0_4;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_2_3_3_3_3_4_f3_2_3_c_n4_0_0_1_1_1_2_0_5_f4_0_1_c_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,4> &nni_1, const std::array<BI,4> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_3_4;
        new_y_2_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;
        new_x_3_1[ ni_1 ] = x_0_5;
        new_y_3_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_2_3_3_3_3_4_f3_2_3_c_n5_0_0_1_1_1_2_4_5_5_5_f5_0_1_c_4_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_3_4;
        new_y_2_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_2_3_3_3_3_4_f3_2_3_c_n3_0_1_1_1_1_2_f3_0_1_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,5> &oni, const std::array<BI,4> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_3_4;
        new_y_2_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_2_3_3_3_3_4_f3_2_3_c_n6_0_1_1_1_1_2_4_5_5_5_0_5_f6_0_1_c_4_5_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,6> &nni_1, const std::array<BI,6> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;
    TI *new_f_5_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 5 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_3_4;
        new_y_2_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;
        new_x_3_1[ ni_1 ] = x_4_5;
        new_y_3_1[ ni_1 ] = y_4_5;
        new_x_4_1[ ni_1 ] = x_5_5;
        new_y_4_1[ ni_1 ] = y_5_5;
        new_x_5_1[ ni_1 ] = x_0_5;
        new_y_5_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_4[ index ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];
        new_f_5_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_2_3_3_3_3_4_f3_2_3_c_n3_0_5_4_5_5_5_f3_c_4_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_3_4;
        new_y_2_0[ ni_0 ] = y_3_4;
        new_x_0_1[ ni_1 ] = x_0_5;
        new_y_0_1[ ni_1 ] = y_0_5;
        new_x_1_1[ ni_1 ] = x_4_5;
        new_y_1_1[ ni_1 ] = y_4_5;
        new_x_2_1[ ni_1 ] = x_5_5;
        new_y_2_1[ ni_1 ] = y_5_5;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_1_1[ ni_1 ] = old_f_4[ index ];
        new_f_2_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_2_3_3_3_4_4_4_5_f4_2_3_4_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_4_4;
        new_y_2_0[ ni_0 ] = y_4_4;
        new_x_3_0[ ni_0 ] = x_4_5;
        new_y_3_0[ ni_0 ] = y_4_5;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n4_2_3_3_3_4_4_4_5_f4_2_3_4_c_n3_0_0_0_1_0_5_f3_0_c_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_4_4;
        new_y_2_0[ ni_0 ] = y_4_4;
        new_x_3_0[ ni_0 ] = x_4_5;
        new_y_3_0[ ni_0 ] = y_4_5;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_0_5;
        new_y_2_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_2_3_3_3_4_4_4_5_f4_2_3_4_c_n4_0_0_1_1_1_2_0_5_f4_0_1_c_5( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,4> &nni_1, const std::array<BI,4> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_4_4;
        new_y_2_0[ ni_0 ] = y_4_4;
        new_x_3_0[ ni_0 ] = x_4_5;
        new_y_3_0[ ni_0 ] = y_4_5;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;
        new_x_3_1[ ni_1 ] = x_0_5;
        new_y_3_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n4_2_3_3_3_4_4_4_5_f4_2_3_4_c_n3_0_1_1_1_1_2_f3_0_1_c( ShapeData &nsd_0, const std::array<BI,4> &nni_0, const std::array<BI,4> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_3_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 3 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_3_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 3 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_2_3;
        new_y_0_0[ ni_0 ] = y_2_3;
        new_x_1_0[ ni_0 ] = x_3_3;
        new_y_1_0[ ni_0 ] = y_3_3;
        new_x_2_0[ ni_0 ] = x_4_4;
        new_y_2_0[ ni_0 ] = y_4_4;
        new_x_3_0[ ni_0 ] = x_4_5;
        new_y_3_0[ ni_0 ] = y_4_5;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;

        new_f_0_0[ ni_0 ] = old_f_2[ index ];
        new_f_1_0[ ni_0 ] = old_f_3[ index ];
        new_f_2_0[ ni_0 ] = old_f_4[ index ];
        new_f_3_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_3_4_4_4_4_5_f3_3_4_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;

        new_x_0_0[ ni_0 ] = x_3_4;
        new_y_0_0[ ni_0 ] = y_3_4;
        new_x_1_0[ ni_0 ] = x_4_4;
        new_y_1_0[ ni_0 ] = y_4_4;
        new_x_2_0[ ni_0 ] = x_4_5;
        new_y_2_0[ ni_0 ] = y_4_5;

        new_f_0_0[ ni_0 ] = old_f_3[ index ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
    }
}
void mk_items_n3_3_4_4_4_4_5_f3_3_4_c_n3_0_0_0_1_0_5_f3_0_c_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_3_4;
        new_y_0_0[ ni_0 ] = y_3_4;
        new_x_1_0[ ni_0 ] = x_4_4;
        new_y_1_0[ ni_0 ] = y_4_4;
        new_x_2_0[ ni_0 ] = x_4_5;
        new_y_2_0[ ni_0 ] = y_4_5;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_0_5;
        new_y_2_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_3[ index ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_3_4_4_4_4_5_f3_3_4_c_n6_0_0_0_1_1_2_2_2_2_3_0_5_f6_0_c_1_2_c_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,6> &nni_1, const std::array<BI,6> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_5_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 5 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;
    TI *new_f_5_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 5 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_3_4;
        new_y_0_0[ ni_0 ] = y_3_4;
        new_x_1_0[ ni_0 ] = x_4_4;
        new_y_1_0[ ni_0 ] = y_4_4;
        new_x_2_0[ ni_0 ] = x_4_5;
        new_y_2_0[ ni_0 ] = y_4_5;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_0_1;
        new_y_1_1[ ni_1 ] = y_0_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;
        new_x_3_1[ ni_1 ] = x_2_2;
        new_y_3_1[ ni_1 ] = y_2_2;
        new_x_4_1[ ni_1 ] = x_2_3;
        new_y_4_1[ ni_1 ] = y_2_3;
        new_x_5_1[ ni_1 ] = x_0_5;
        new_y_5_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_3[ index ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_1[ ni_1 ] = old_f_1[ index ];
        new_f_3_1[ ni_1 ] = old_f_2[ index ];
        new_f_4_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_5_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_3_4_4_4_4_5_f3_3_4_c_n4_0_0_1_1_1_2_0_5_f4_0_1_c_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,4> &nni_1, const std::array<BI,4> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_3_4;
        new_y_0_0[ ni_0 ] = y_3_4;
        new_x_1_0[ ni_0 ] = x_4_4;
        new_y_1_0[ ni_0 ] = y_4_4;
        new_x_2_0[ ni_0 ] = x_4_5;
        new_y_2_0[ ni_0 ] = y_4_5;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;
        new_x_3_1[ ni_1 ] = x_0_5;
        new_y_3_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_3[ index ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_3_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_3_4_4_4_4_5_f3_3_4_c_n5_0_0_1_1_2_2_2_3_0_5_f5_0_1_2_c_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,5> &nni_1, const std::array<BI,5> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_4_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 4 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;
    TI *new_f_4_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 4 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_3_4;
        new_y_0_0[ ni_0 ] = y_3_4;
        new_x_1_0[ ni_0 ] = x_4_4;
        new_y_1_0[ ni_0 ] = y_4_4;
        new_x_2_0[ ni_0 ] = x_4_5;
        new_y_2_0[ ni_0 ] = y_4_5;
        new_x_0_1[ ni_1 ] = x_0_0;
        new_y_0_1[ ni_1 ] = y_0_0;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_2_2;
        new_y_2_1[ ni_1 ] = y_2_2;
        new_x_3_1[ ni_1 ] = x_2_3;
        new_y_3_1[ ni_1 ] = y_2_3;
        new_x_4_1[ ni_1 ] = x_0_5;
        new_y_4_1[ ni_1 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_3[ index ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = old_f_2[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_4_1[ ni_1 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_3_4_4_4_4_5_f3_3_4_c_n3_0_1_1_1_1_2_f3_0_1_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_3_4;
        new_y_0_0[ ni_0 ] = y_3_4;
        new_x_1_0[ ni_0 ] = x_4_4;
        new_y_1_0[ ni_0 ] = y_4_4;
        new_x_2_0[ ni_0 ] = x_4_5;
        new_y_2_0[ ni_0 ] = y_4_5;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_1_2;
        new_y_2_1[ ni_1 ] = y_1_2;

        new_f_0_0[ ni_0 ] = old_f_3[ index ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_3_4_4_4_4_5_f3_3_4_c_n4_0_1_1_1_2_2_2_3_f4_0_1_2_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,4> &nni_1, const std::array<BI,4> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_3_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 3 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_3_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 3 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_3_4;
        new_y_0_0[ ni_0 ] = y_3_4;
        new_x_1_0[ ni_0 ] = x_4_4;
        new_y_1_0[ ni_0 ] = y_4_4;
        new_x_2_0[ ni_0 ] = x_4_5;
        new_y_2_0[ ni_0 ] = y_4_5;
        new_x_0_1[ ni_1 ] = x_0_1;
        new_y_0_1[ ni_1 ] = y_0_1;
        new_x_1_1[ ni_1 ] = x_1_1;
        new_y_1_1[ ni_1 ] = y_1_1;
        new_x_2_1[ ni_1 ] = x_2_2;
        new_y_2_1[ ni_1 ] = y_2_2;
        new_x_3_1[ ni_1 ] = x_2_3;
        new_y_3_1[ ni_1 ] = y_2_3;

        new_f_0_0[ ni_0 ] = old_f_3[ index ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_0[ index ];
        new_f_1_1[ ni_1 ] = old_f_1[ index ];
        new_f_2_1[ ni_1 ] = old_f_2[ index ];
        new_f_3_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_3_4_4_4_4_5_f3_3_4_c_n3_1_2_2_2_2_3_f3_1_2_c( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,5> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;

        new_x_0_0[ ni_0 ] = x_3_4;
        new_y_0_0[ ni_0 ] = y_3_4;
        new_x_1_0[ ni_0 ] = x_4_4;
        new_y_1_0[ ni_0 ] = y_4_4;
        new_x_2_0[ ni_0 ] = x_4_5;
        new_y_2_0[ ni_0 ] = y_4_5;
        new_x_0_1[ ni_1 ] = x_1_2;
        new_y_0_1[ ni_1 ] = y_1_2;
        new_x_1_1[ ni_1 ] = x_2_2;
        new_y_1_1[ ni_1 ] = y_2_2;
        new_x_2_1[ ni_1 ] = x_2_3;
        new_y_2_1[ ni_1 ] = y_2_3;

        new_f_0_0[ ni_0 ] = old_f_3[ index ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_1[ index ];
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
    }
}
void mk_items_n3_3_4_4_4_4_5_f3_3_4_c_n3_1_2_2_2_2_3_f3_1_2_c_n3_0_0_0_1_0_5_f3_0_c_5( ShapeData &nsd_0, const std::array<BI,3> &nni_0, const std::array<BI,3> &nfi_0, ShapeData &nsd_1, const std::array<BI,3> &nni_1, const std::array<BI,3> &nfi_1, ShapeData &nsd_2, const std::array<BI,3> &nni_2, const std::array<BI,3> &nfi_2, const ShapeData &osd, const std::array<BI,6> &oni, const std::array<BI,6> &ofi, BI beg_ind, BI end_ind, const void *cut_ids, N<2> dim ) override {
    TF *new_x_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_0_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 0 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_1_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 1 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 0 ) * nsd_0.rese;
    TF *new_y_2_0 = reinterpret_cast<TF *>( nsd_0.coordinates ) + ( nni_0[ 2 ] * dim + 1 ) * nsd_0.rese;
    TF *new_x_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_0_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 0 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_1_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 1 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 0 ) * nsd_1.rese;
    TF *new_y_2_1 = reinterpret_cast<TF *>( nsd_1.coordinates ) + ( nni_1[ 2 ] * dim + 1 ) * nsd_1.rese;
    TF *new_x_0_2 = reinterpret_cast<TF *>( nsd_2.coordinates ) + ( nni_2[ 0 ] * dim + 0 ) * nsd_2.rese;
    TF *new_y_0_2 = reinterpret_cast<TF *>( nsd_2.coordinates ) + ( nni_2[ 0 ] * dim + 1 ) * nsd_2.rese;
    TF *new_x_1_2 = reinterpret_cast<TF *>( nsd_2.coordinates ) + ( nni_2[ 1 ] * dim + 0 ) * nsd_2.rese;
    TF *new_y_1_2 = reinterpret_cast<TF *>( nsd_2.coordinates ) + ( nni_2[ 1 ] * dim + 1 ) * nsd_2.rese;
    TF *new_x_2_2 = reinterpret_cast<TF *>( nsd_2.coordinates ) + ( nni_2[ 2 ] * dim + 0 ) * nsd_2.rese;
    TF *new_y_2_2 = reinterpret_cast<TF *>( nsd_2.coordinates ) + ( nni_2[ 2 ] * dim + 1 ) * nsd_2.rese;

    TI *new_f_0_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 0 ] * nsd_0.rese;
    TI *new_f_1_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 1 ] * nsd_0.rese;
    TI *new_f_2_0 = reinterpret_cast<TI *>( nsd_0.face_ids ) + nni_0[ 2 ] * nsd_0.rese;
    TI *new_f_0_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 0 ] * nsd_1.rese;
    TI *new_f_1_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 1 ] * nsd_1.rese;
    TI *new_f_2_1 = reinterpret_cast<TI *>( nsd_1.face_ids ) + nni_1[ 2 ] * nsd_1.rese;
    TI *new_f_0_2 = reinterpret_cast<TI *>( nsd_2.face_ids ) + nni_2[ 0 ] * nsd_2.rese;
    TI *new_f_1_2 = reinterpret_cast<TI *>( nsd_2.face_ids ) + nni_2[ 1 ] * nsd_2.rese;
    TI *new_f_2_2 = reinterpret_cast<TI *>( nsd_2.face_ids ) + nni_2[ 2 ] * nsd_2.rese;

    TI *new_ids_0 = reinterpret_cast<TI *>( nsd_0.ids );
    TI *new_ids_1 = reinterpret_cast<TI *>( nsd_1.ids );
    TI *new_ids_2 = reinterpret_cast<TI *>( nsd_2.ids );

    const TF *old_x_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 0 ) * osd.rese;
    const TF *old_y_0 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 0 ] * dim + 1 ) * osd.rese;
    const TF *old_x_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 0 ) * osd.rese;
    const TF *old_y_1 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 1 ] * dim + 1 ) * osd.rese;
    const TF *old_x_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 0 ) * osd.rese;
    const TF *old_y_2 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 2 ] * dim + 1 ) * osd.rese;
    const TF *old_x_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 0 ) * osd.rese;
    const TF *old_y_3 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 3 ] * dim + 1 ) * osd.rese;
    const TF *old_x_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 0 ) * osd.rese;
    const TF *old_y_4 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 4 ] * dim + 1 ) * osd.rese;
    const TF *old_x_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 0 ) * osd.rese;
    const TF *old_y_5 = reinterpret_cast<const TF *>( osd.coordinates ) + ( oni[ 5 ] * dim + 1 ) * osd.rese;

    const TI *old_f_0 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 0 ] * osd.rese;
    const TI *old_f_1 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 1 ] * osd.rese;
    const TI *old_f_2 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 2 ] * osd.rese;
    const TI *old_f_3 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 3 ] * osd.rese;
    const TI *old_f_4 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 4 ] * osd.rese;
    const TI *old_f_5 = reinterpret_cast<const TI *>( osd.face_ids ) + oni[ 5 ] * osd.rese;

    const TI *old_ids = reinterpret_cast<const TI *>( osd.ids );

    const TI *indices = reinterpret_cast<const TI *>( osd.cut_indices );

    const TF *old_scp_0 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 0 ] * osd.rese;
    const TF *old_scp_1 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 1 ] * osd.rese;
    const TF *old_scp_2 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 2 ] * osd.rese;
    const TF *old_scp_3 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 3 ] * osd.rese;
    const TF *old_scp_4 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 4 ] * osd.rese;
    const TF *old_scp_5 = reinterpret_cast<const TF *>( osd.cut_out_scps ) + oni[ 5 ] * osd.rese;

    for( BI num_ind = beg_ind; num_ind < end_ind; ++num_ind ) {
        TI index = indices[ num_ind ];

        TF scp_0 = old_scp_0[ index ];
        TF scp_1 = old_scp_1[ index ];
        TF scp_2 = old_scp_2[ index ];
        TF scp_3 = old_scp_3[ index ];
        TF scp_4 = old_scp_4[ index ];
        TF scp_5 = old_scp_5[ index ];

        TF d_0_1 = scp_0 / ( scp_0 - scp_1 );
        TF d_0_5 = scp_0 / ( scp_0 - scp_5 );
        TF d_1_2 = scp_1 / ( scp_1 - scp_2 );
        TF d_2_3 = scp_2 / ( scp_2 - scp_3 );
        TF d_3_4 = scp_3 / ( scp_3 - scp_4 );
        TF d_4_5 = scp_4 / ( scp_4 - scp_5 );

        TF x_0_0 = old_x_0[ index ];
        TF y_0_0 = old_y_0[ index ];
        TF x_1_1 = old_x_1[ index ];
        TF y_1_1 = old_y_1[ index ];
        TF x_2_2 = old_x_2[ index ];
        TF y_2_2 = old_y_2[ index ];
        TF x_3_3 = old_x_3[ index ];
        TF y_3_3 = old_y_3[ index ];
        TF x_4_4 = old_x_4[ index ];
        TF y_4_4 = old_y_4[ index ];
        TF x_5_5 = old_x_5[ index ];
        TF y_5_5 = old_y_5[ index ];

        TF x_0_1 = x_0_0 + d_0_1 * ( x_1_1 - x_0_0 );
        TF y_0_1 = y_0_0 + d_0_1 * ( y_1_1 - y_0_0 );
        TF x_0_5 = x_0_0 + d_0_5 * ( x_5_5 - x_0_0 );
        TF y_0_5 = y_0_0 + d_0_5 * ( y_5_5 - y_0_0 );
        TF x_1_2 = x_1_1 + d_1_2 * ( x_2_2 - x_1_1 );
        TF y_1_2 = y_1_1 + d_1_2 * ( y_2_2 - y_1_1 );
        TF x_2_3 = x_2_2 + d_2_3 * ( x_3_3 - x_2_2 );
        TF y_2_3 = y_2_2 + d_2_3 * ( y_3_3 - y_2_2 );
        TF x_3_4 = x_3_3 + d_3_4 * ( x_4_4 - x_3_3 );
        TF y_3_4 = y_3_3 + d_3_4 * ( y_4_4 - y_3_3 );
        TF x_4_5 = x_4_4 + d_4_5 * ( x_5_5 - x_4_4 );
        TF y_4_5 = y_4_4 + d_4_5 * ( y_5_5 - y_4_4 );

        TI ni_0 = nsd_0.size++;
        TI ni_1 = nsd_1.size++;
        TI ni_2 = nsd_2.size++;

        new_x_0_0[ ni_0 ] = x_3_4;
        new_y_0_0[ ni_0 ] = y_3_4;
        new_x_1_0[ ni_0 ] = x_4_4;
        new_y_1_0[ ni_0 ] = y_4_4;
        new_x_2_0[ ni_0 ] = x_4_5;
        new_y_2_0[ ni_0 ] = y_4_5;
        new_x_0_1[ ni_1 ] = x_1_2;
        new_y_0_1[ ni_1 ] = y_1_2;
        new_x_1_1[ ni_1 ] = x_2_2;
        new_y_1_1[ ni_1 ] = y_2_2;
        new_x_2_1[ ni_1 ] = x_2_3;
        new_y_2_1[ ni_1 ] = y_2_3;
        new_x_0_2[ ni_2 ] = x_0_0;
        new_y_0_2[ ni_2 ] = y_0_0;
        new_x_1_2[ ni_2 ] = x_0_1;
        new_y_1_2[ ni_2 ] = y_0_1;
        new_x_2_2[ ni_2 ] = x_0_5;
        new_y_2_2[ ni_2 ] = y_0_5;

        new_f_0_0[ ni_0 ] = old_f_3[ index ];
        new_f_1_0[ ni_0 ] = old_f_4[ index ];
        new_f_2_0[ ni_0 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_1[ ni_1 ] = old_f_1[ index ];
        new_f_1_1[ ni_1 ] = old_f_2[ index ];
        new_f_2_1[ ni_1 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_0_2[ ni_2 ] = old_f_0[ index ];
        new_f_1_2[ ni_2 ] = reinterpret_cast<const TI *>( cut_ids )[ old_ids[ index ] ];
        new_f_2_2[ ni_2 ] = old_f_5[ index ];

        new_ids_0[ ni_0 ] = old_ids[ index ];
        new_ids_1[ ni_1 ] = old_ids[ index ];
        new_ids_2[ ni_2 ] = old_ids[ index ];
    }
}
